---
title: 'Modular division proof'
date: 2025-08-04
permalink: /posts/2025/8/modular-division/
tags:
  - Articles
  - Number Theory
---
Proof of Modular division 

# Modular division
Recently I have been reviewing some number theory topics to refresh my memory on RSA. I read this [Modular Arithmetic](https://crypto.stanford.edu/pbc/notes/numbertheory/arith.html). The blog page defines the division as:

> If y divides x as integers, then one might guess we could use the usual definition. Let us see where this leads: we have 10 = 4 (mod 6). Dividing both sides by 2 gives the incorrect equation 5 = 2 (mod 6). Thus we have to change what division means. Intuitively, division should "undo multiplication", that is to divide \( x \) by \( y \) means to find a number \( z \) such that \( y * z = x \). We can rewrite the modular division as \( y \)\( z \) = \( x \) (mod n), in this specific case is 2 \( * \) \( z \) = 4 (mod 6).  The problem above is that there are different candidates for \( z \): in \( \mathbb{Z}_6 \), both 5 and 2 give 4 when multiplied by 2.

If you try to “divide” a congruence  \( a \equiv x \pmod{n} \)  by \( y \), you must solve  
\[
yz \equiv x \pmod{n}.
\]
This has a unique solution \( z \mod n \) only when \( \gcd(y, n) = 1 \), in which case:
\[
z \equiv y^{-1} x \pmod{n}.
\]
If \( \gcd(y, n) = d > 1 \), then:
- No solution exists unless \( d \mid x \).
- If \( d \mid x \), there are exactly \( d \) solutions modulo \( n \).
For example:  
\( 10 \equiv 4 \pmod{6} \), with \( y = 2 \), \( n = 6 \), gives:
\[
2z \equiv 4 \pmod{6}.
\]

Here \( \gcd(2, 6) = 2 \) and \( 2 \mid 4 \),  
so there are two solutions:  
\( z \equiv 2 \) and \( z \equiv 5 \mod{6} \).  

Hence, “division” by 2 is **not well-defined** in \( \mathbb{Z}_6 \).
**Thus, a unique \( z \) exists modulo \( n \) only if \( \gcd(y, n) = 1 \).**

<details>
<summary>Proof of uniqueness</summary>

Below is a **line-by-line, fully self-contained proof** of the following uniqueness claim for linear–Diophantine equations.

---

## Theorem (“Uniqueness modulo the coefficients”)

Let

$$
y,z,n,k,x\in\mathbb Z,\qquad \gcd(y,n)=1 .
$$

Consider

$$
y\,z+n\,k=x .\tag{1}
$$

1. *(Existence)* Equation (1) always has an integer solution.
2. *(Complete description)* If $(z_0,k_0)$ is **one** solution, then every solution is

$$
z=z_0+n\,t,\qquad k=k_0-y\,t,\qquad t\in\mathbb Z. \tag{2}
$$

3. *(Uniqueness in residue classes)* Among integers $0\le z<n$ there is **exactly one** $z$ satisfying (1); equivalently, the residue class $z\bmod n$ is unique.
   Dually, among $0\le k<y$ there is **exactly one** $k$ satisfying (1).

That is the precise sense in which “the solution is unique when $\gcd(y,n)=1$.”

---

## 1.  A Bézout-based particular solution

Because $\gcd(y,n)=1$, Bézout’s identity gives integers $a,b$ with

$$
a\,y+b\,n=1 .\tag{3}
$$

Multiplying by the constant term $x$ yields a *particular* solution

$$
(z_0,k_0):=(a\,x,\,b\,x),\qquad 
y\,z_0+n\,k_0
              =(ay+bn)x
              =x. \tag{4}
$$

---

## 2.  Passing to homogeneous form

Let $(z,k)$ be **any** solution of (1).  Subtract (4) from (1):

$$
y(z-z_0)+n(k-k_0)=0 .\tag{5}
$$

Write

$$
\Delta z:=z-z_0,\qquad \Delta k:=k-k_0,
$$

so (5) becomes

$$
y\,\Delta z=-\,n\,\Delta k .\tag{6}
$$

---

## 3.  Key lemma (Euclidean lemma)

> **Lemma.** If $\gcd(a,b)=1$ and $a\mid bc$ then $a\mid c$.

*Proof:* Bézout gives $u,v$ with $au+bv=1$.  Multiply by $c$:
$au\,c+bv\,c=c$.  Both summands on the left are divisible by $a$; hence $c$ is.

---

## 4.  Deriving the parameter $t$

### 4.1  Show $n\mid\Delta z$

From (6) we have $n\mid y\,\Delta z$.
Because $\gcd(y,n)=1$, Lemma ⇒ $n\mid\Delta z$.
So there exists $t\in\mathbb Z$ with

$$
\Delta z=n\,t \;\Longrightarrow\; z = z_0+n\,t.\tag{7}
$$

### 4.2  Determine $\Delta k$ in terms of the **same** $t$

Insert (7) into (6):

$$
y(n\,t)=-n\,\Delta k
\;\Longrightarrow\;
\Delta k=-y\,t
\;\Longrightarrow\;
k=k_0-y\,t. \tag{8}
$$

Because every step was an “if and only if”, every integer $t$ gives a bona-fide solution, **and different $t$ give different ordered pairs**.  That establishes statement (2).

---
## 5.  Uniqueness of the residue class

### 5.1  Uniqueness of \( z \bmod n \)

From (2) we have \( z \equiv z_0 \pmod{n} \).  
Conversely, if some \( z^* \equiv z_0 \pmod{n} \), write \( z^* = z_0 + n\,t \) (unique \( t \) because \( n \neq 0 \)).  
Define \( k^* = k_0 - y\,t \); then \( (z^*, k^*) \) satisfies (1).

Hence *exactly one* residue class (namely \( z_0 \bmod n \)) works.

### 5.2  Uniqueness of \( k \bmod y \)

Symmetrically, from (2) we have \( k \equiv k_0 \pmod{y} \);  
any \( k^* \equiv k_0 \pmod{y} \) can be written \( k^* = k_0 - y\,t \),  
forcing \( z^* = z_0 + n\,t \).  
Again there is *exactly one* workable residue class modulo \( y \).


---

## 6.  Putting it all together (proof recap)

1. **Existence** comes from Bézout (Section 1).
2. **All** solutions are those of form (2) (Sections 2–4).
3. The mapping $t\mapsto(z,k)$ is a bijection $\mathbb Z\to\{\text{solutions}\}$.
4. Fixing $z\bmod n$ or $k\bmod y$ pins down that $t$, hence the entire solution, giving the advertised *uniqueness in each residue class*.

---

## 7.  Tiny numerical check

Solve $5z+7k=3$.

* **Particular solution:**  $5(-4)+7(3)=1$ ⇒ multiply by 3 ⇒ $(z_0,k_0)=(-12,9)$.
* **General family:**
  $z=-12+7t,\;k=9-5t$.
* **Residues:**
  $z\equiv2\pmod7$ is unique; $k\equiv4\pmod5$ is unique.

Taking representatives $0\le z<7$ forces $t=2\to z=2,k=-1$; every other solution is obtained by shifting $t$.

---

### Final remark

“Uniqueness” in Diophantine equations with coprime coefficients always refers to this residue-class uniqueness (or, equivalently, the one-to-one correspondence with the free integer parameter $t$).  The coprimality condition is *exactly* what allows us to cancel factors and tie both variables to the **same** $t$, which is the crux of the argument.
</details>


I also included proof for non uniqueness when \( \gcd(y, n) > 1 \).

<details>
<summary>Proof of non uniqueness</summary>

Below is a fully “long-form’’ proof of the standard linear-Diophantine theorem

$$
\boxed{\,y\,z \;+\; n\,k \;=\; x,\qquad y,n,x\in\mathbb Z\,},
$$

written so that **every single claim is justified** and no algebraic step is skipped.

---

## 0.  What we are trying to prove

Let

$$
d \;=\;\gcd(y,n),\qquad d>1.
$$

We will show

1. **(Necessity)** If an integer solution $(z,k)$ exists, then $d\mid x$.
2. **(Sufficiency & parametrisation)** If $d\mid x$, then

   * a particular solution $(z_0,k_0)$ exists;
   * **all** solutions are given by

     $$
     z = z_0 +\frac{n}{d}\,t,\qquad
     k = k_0 -\frac{y}{d}\,t,\qquad t\in\mathbb Z.
     $$

---

## 1.  Why $d\mid x$ is necessary

Because $d$ divides **both** $y$ and $n$, it also divides every integer linear combination of them (that is literally the definition of $\gcd$).  In particular, for any candidate solution

$$
x \;=\; yz+nk
$$

is such a combination, so $d\mid x$.

> **Conclusion.** If $d\nmid x$ the equation is impossible.
> We may therefore assume for the rest of the proof that **$d\mid x$**.

---

## 2.  Factoring out the common divisor

Because $d\mid y,n,x$, we can write

$$
y = d\,\bar y,\quad n = d\,\bar n,\quad x = d\,\bar x
$$

with $\bar y,\bar n,\bar x\in\mathbb Z$.

A **critical** observation:

$$
\gcd(\bar y,\bar n)=1.
$$

*Proof:* any common divisor of $\bar y$ and $\bar n$ times $d$ would divide $y$ and $n$; but $d$ already is the greatest such divisor, so that extra divisor must be $1$.

Substitute into the original equation and divide by $d$:

$$
\bar y\,z + \bar n\,k = \bar x.\tag{★}
$$

The problem is now **reduced** to solving (★) with **coprime** coefficients $\bar y,\bar n$.

---

## 3.  Bézout’s identity gives one solution

Because $\gcd(\bar y,\bar n)=1$, Bézout’s identity tells us that there exist integers $a,b$ such that

$$
\bar y\,a + \bar n\,b = 1.\tag{Bézout}
$$

> **How to get $a,b$ concretely?**
> Run the *extended Euclidean algorithm* on $\bar y$ and $\bar n$.  It keeps track of a remainder sequence and rewrites each remainder as a combination of the original numbers; the last non-zero remainder is 1, and its combination coefficients are exactly $a,b$.  (A textbook will show the mechanical steps; here we only need the existence.)

Multiply (Bézout) by $\bar x$:

$$
\bar y\,(\bar x a) + \bar n\,(\bar x b) = \bar x.
$$

Therefore the pair

$$
\boxed{\,z_0 := \bar x a,\quad k_0 := \bar x b\,}
$$

is **one** legitimate solution of (★).

---

## 4.  Describing the entire solution set

Let $(z,k)$ be **any** solution of (★).  Subtract the particular solution:

$$
\bar y\,(z-z_0) + \bar n\,(k-k_0) = 0.
$$

Rearrange:

$$
\bar y\,(z-z_0) = -\bar n\,(k-k_0).
$$

Because $\bar y$ and $\bar n$ are coprime, the integer $\bar y$ must divide the right-hand side, hence **must divide** $k-k_0$.  Formally, there exists $t\in\mathbb Z$ with

$$
k - k_0 = \bar y\,t.
$$

Plugging this back,

$$
\bar y\,(z-z_0) = -\bar n\,(\bar y t) \quad\Longrightarrow\quad
z - z_0 = -\bar n\,t.
$$

So every solution can be written in the shape

$$
\boxed{\,z = z_0 - \bar n\,t,\qquad k = k_0 + \bar y\,t,\qquad t\in\mathbb Z.}
$$
where \( \bar n \) equals \( n / d \) and \( \bar y \) equals \( y / d \).

Because $t$ is arbitrary, these are **all** solutions: any two solutions differ by a multiple of $(-\bar n,\bar y)$, and conversely adding such a multiple preserves the equation.


## 5. Example

We want to show that when $d = \gcd(y, n) > 1$, **more than one** solution $z$ exists within the same residue class **modulo $n$**.

That is, **modulo uniqueness fails** — we can find two values of $z$ that:

* both satisfy the equation $y z + n k = x$,
* and are **congruent modulo $n$**.

Let’s go step-by-step.

---

## Choose example with $\gcd(y, n) = d > 1$

Let’s take:

* $y = 4$
* $n = 6$
  Then $\gcd(4,6) = 2 > 1$.

Let’s pick a **right-hand side** $x = 2$, which is divisible by $d = 2$, so we know solutions *exist*.

---

## Step 1: Solve the equation

We want to solve:

$$
4z + 6k = 2.
$$

Divide through by $d = 2$:

$$
2z + 3k = 1. \tag{1}
$$

---

## Step 2: Find a particular solution

Use the extended Euclidean algorithm:

$$
3(1) + 2(-1) = 1,
$$

So one solution to (1) is:

$$
z_0 = -1,\quad k_0 = 1.
$$

---

##  Step 3: General solution

From the standard method, all solutions to (1) are:

$$
z = -1 + 3t,\quad k = 1 - 2t,\quad t \in \mathbb Z.
$$

Go back to the original equation:

$$
z = -1 + 3t \Rightarrow \text{solutions to } 4z + 6k = 2.
$$

Let’s compute a few values of $z$:

| $t$ | $z = -1 + 3t$ |
| --- | ------------- |
| 0   | -1            |
| 1   | 2             |
| 2   | 5             |
| 3   | 8             |

Now look at $z \bmod 6$:

| $z$ | $z \bmod 6$ |
| --- | ----------- |
| -1  | 5           |
| 2   | 2           |
| 5   | 5           |
| 8   | 2           |

---

##  Non-uniqueness found!

We see:

* $z = -1$ and $z = 5$ both satisfy $z \equiv 5 \pmod{6}$, and both are valid solutions.
* $z = 2$ and $z = 8$ both satisfy $z \equiv 2 \pmod{6}$, and both are valid solutions.

So, **two different values of $t$** yield solutions with the **same $z \bmod 6$**.

This is **non-uniqueness modulo $n$**.

---

##  Why did this happen?

Because $\gcd(y,n)=2 > 1$, our general solution:

$$
z = z_0 + \frac{n}{d} t = -1 + 3t
$$

has **step size $\frac{n}{d} = 3$**, which means the set of possible $z$ values **modulo $n = 6$** only covers **some** of the congruence classes.

Specifically:

* The solution $z = z_0 + \tfrac{n}{d}t$ only ranges over a subset of residues modulo $n$, specifically over one residue class modulo $\frac{n}{\gcd(y,n)} = 3$, **not 6**.

Thus:

* Modulo uniqueness is only guaranteed **modulo $n$** if $\gcd(y,n)=1$.
* If $\gcd(y,n)=d>1$, the equation may have **$d$** different solutions with the same $z \bmod n$.


> *“If $d=1$ (that is, $\frac{n}{d}=n$), then the add-on term is $n t$, which is always 0 modulo $n$. Consequently $z \equiv z_0 \pmod n$ for every solution, giving uniqueness in that modulus.”*
---


</details>